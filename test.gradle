apply plugin: 'jacoco'

jacocoTestReport {
    reports {
        xml {
            enabled true
        }
    }
}

test {
    useJUnitPlatform()
}

task unitTest(type: Test) {
    group("verification")

    useJUnitPlatform {
        excludeTags "integration"
    }
}

task integrationTest(type: Test) {
    group("verification")

    useJUnitPlatform {
        includeTags 'integration'
    }
}

task jacocoUnitTestReport(type: JacocoReport) {
    sourceSets sourceSets.main
    executionData unitTest

    reports {
        xml {
            enabled true
        }
    }
}

task jacocoIntegrationTestReport(type: JacocoReport) {
    sourceSets sourceSets.main
    executionData integrationTest

    reports {
        xml {
            enabled true
        }
    }
}
